# PROGRAMMING IDIOMS

- RULE 1: R is preferred over Python for analytical tasks, data manipulation, and statistical modeling unless the user specifically requests Python.
- RULE 2: When generating R code and solutions, use and prefer data.table functions and idioms over base R or tidyverse, unless there is a compelling reason otherwise

# PLAYWRIGHT SCREENSHOT CAPTURING

**IMPORTANT**: All agents capturing screenshots from URLs must use the standalone Node.js script method, NOT the MCP Playwright tools.

## Why This Method?

The MCP Playwright integration has persistent context locking issues in WSL2 environments. The standalone script method:
- âœ“ Works reliably every time
- âœ“ Avoids browser context conflicts
- âœ“ Supports full-page screenshots
- âœ“ Can capture multiple pages in sequence
- âœ“ Includes proper error handling

## How to Implement

### Quick Steps:
1. Copy template from `/home/joel/screenshot-template.mjs`
2. Update the `pages` array with your target URLs
3. Run: `cd /home/joel && node script-name.mjs`
4. Screenshots are saved to `/home/joel/` with descriptive filenames

### Template Structure:
```javascript
import { chromium } from '@playwright/test';

async function captureScreenshots() {
  const browser = await chromium.launch({ headless: true });
  const page = await browser.newPage();

  const pages = [
    { url: 'https://example.com', filename: '/home/joel/screenshot-1.png', label: 'Home' },
    { url: 'https://example.com/about', filename: '/home/joel/screenshot-2.png', label: 'About' },
  ];

  try {
    for (const pageInfo of pages) {
      await page.goto(pageInfo.url, { waitUntil: 'networkidle', timeout: 10000 });
      await page.screenshot({ path: pageInfo.filename, fullPage: true });
    }
  } finally {
    await browser.close();
  }
}

captureScreenshots();
```

### What Agents Should Do:
- **Always** use this method when asked for URL screenshots
- Create `.mjs` scripts with descriptive names
- Save outputs to `/home/joel/` directory
- Handle 404s and network errors gracefully
- Report which pages succeeded/failed

### Reference Template:
Available at: `/home/joel/screenshot-template.mjs` - copy and modify as needed


# AGENT METADATA DOCUMENTATION 

*CRITICAL! All model outputs should generate a metadata footer that documents the agent name, version, and relevant parameters used to generate the output. In all cases, the goal with an artifact is to never leave the human user uncertain about exactly which agent or agent framework produced a given output. Please use the following example format.  Adjust the exact parameters as needed to fit the specific agent framework and/or workflow used, however, all sections should be included, even if not applicable to a specific scenario; in this case use the **none** notation used in the example below.*

```
## Document Generation Metadata

**Generated By:** UX Expert Agent (Sally ðŸŽ¨)
**Agent ID:** `ux-expert`
**Workflow Used:** Interactive Mode - Direct user request for UX analysis
**Generation Date:** 2025-11-01

### Agent Configuration

- **Primary Agent:** BMad:agents:ux-expert
  - **Slash Command:** `/BMad:agents:ux-expert`
  - **Agent File:** `.bmad-core/agents/ux-expert.md` (embedded in slash command)
  - **Persona:** User Experience Designer & UI Specialist
  - **Command Executed:** Direct analysis request (not a formal command workflow)

### Workflow Components Used

**Source Files Analyzed:**
- `/home/joel/02_mapscatter/shiny-app/app.R` - Main Shiny application (973 lines)
  - UI framework: Basic `fluidPage()` with `absolutePanel()` components
  - Visualization: Leaflet maps, Plotly scatterplots
  - Libraries: shiny, leaflet, plotly, shinyjs, sf, data.table

**Task Files:**
- **None** - Direct analysis mode, not using formal task workflows

**Template Files:**
- **None** - Custom markdown document structure created ad-hoc

**Data Files:**
- **None** - No elicitation methods or reference data required for this analysis

**Configuration Files:**
- `.bmad-core/core-config.yaml` - Project configuration loaded at agent activation

### Sub-Agents

**None** - All work completed by primary ux-expert agent in single session

### Workflow Execution Summary

- **Mode:** Direct Analysis & Recommendations
- **Analysis Type:** Comprehensive UX audit with enhancement suggestions
- **Methodology Applied:**
  - Code review of existing Shiny UI/UX patterns
  - Best practices evaluation (accessibility, responsiveness, visual design)
  - User experience pattern analysis (interaction, navigation, feedback)
  - Modern web design standards (2025 best practices)
- **Recommendations Structure:**
  - 18 detailed enhancement suggestions
  - Organized into 7 categories (Visual Design, Interaction, Accessibility, Responsive, Animation, Data Viz, Performance)
  - 4-phase implementation roadmap (prioritized by impact/effort)
  - Complete design system specification
- **Code Examples:** R/Shiny, CSS, JavaScript provided for each suggestion
- **Output Format:** Markdown with code blocks, emojis for visual hierarchy
- **Output Location:** `/home/joel/02_mapscatter/ux-enhancement-suggestions.md`

### Analysis Summary

- **Current UI Framework:** Basic Shiny (`fluidPage()`) with absolute panels
- **Current Strengths:**
  - Solid functionality with interactive map/scatterplot integration
  - Good data integration (housing unit growth, census geographies)
  - Responsive interactions (county selection, block group drill-down)
  - Print-friendly legend implementation
- **Opportunities Identified:**
  - Modern styling (bslib framework, gradients, shadows)
  - Enhanced accessibility (ARIA labels, high contrast mode, keyboard navigation)
  - Improved mobile experience (responsive breakpoints)
  - Visual polish (animations, micro-interactions, refined typography)
  - User control improvements (search, opacity sliders, color palette selection)
- **Priority Focus:**
  1. Visual design modernization (bslib, enhanced styling)
  2. User control improvements (search, controls panel)
  3. Accessibility enhancements (ARIA, keyboard shortcuts)
  4. Performance indicators (loading states, progress bars)

### Technical Notes

- Document created using BMADâ„¢ Core framework (Business Methodology & Agent Design)
- Agent activation protocol: Read agent file â†’ Load core-config â†’ Greet â†’ Auto-run `*help` â†’ Execute user request
- Analysis approach: Read source code â†’ Identify UX patterns â†’ Generate categorized recommendations â†’ Provide implementation roadmap
- No formal task workflows executed; direct analysis mode
- Agent persona: Empathetic, creative, detail-oriented, user-obsessed, data-informed UX specialist
- Design philosophy: User-centric, simplicity through iteration, delight in details, real scenario consideration

### System Paths Reference

```
Agent Definition:     /home/joel/core/.bmad-core/agents/ux-expert.md
Project Config:       /home/joel/core/.bmad-core/core-config.yaml
Source Analyzed:      /home/joel/02_mapscatter/shiny-app/app.R
Output Generated:     /home/joel/02_mapscatter/ux-enhancement-suggestions.md
Working Directory:    /home/joel/core
```

---

*These suggestions balance visual appeal with usability, accessibility, and performance. Start with Phase 1 for immediate visual impact, then progress through phases based on your users' needs and feedback.*

## End of Metadata